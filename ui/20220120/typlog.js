(()=>{var Tt=Object.create;var P=Object.defineProperty;var qt=Object.getOwnPropertyDescriptor;var Mt=Object.getOwnPropertyNames;var Nt=Object.getPrototypeOf,jt=Object.prototype.hasOwnProperty;var $t=t=>P(t,"__esModule",{value:!0});var Ot=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Rt=(t,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Mt(e))!jt.call(t,o)&&o!=="default"&&P(t,o,{get:()=>e[o],enumerable:!(n=qt(e,o))||n.enumerable});return t},Dt=t=>Rt($t(P(t!=null?Tt(Nt(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Z=Ot((X,O)=>{(function(t){"use strict";function e(r,p){var s=(r&65535)+(p&65535),g=(r>>16)+(p>>16)+(s>>16);return g<<16|s&65535}function n(r,p){return r<<p|r>>>32-p}function o(r,p,s,g,w,v){return e(n(e(e(p,r),e(g,v)),w),s)}function i(r,p,s,g,w,v,y){return o(p&s|~p&g,r,p,w,v,y)}function a(r,p,s,g,w,v,y){return o(p&g|s&~g,r,p,w,v,y)}function m(r,p,s,g,w,v,y){return o(p^s^g,r,p,w,v,y)}function h(r,p,s,g,w,v,y){return o(s^(p|~g),r,p,w,v,y)}function f(r,p){r[p>>5]|=128<<p%32,r[(p+64>>>9<<4)+14]=p;var s,g,w,v,y,c=1732584193,l=-271733879,u=-1732584194,d=271733878;for(s=0;s<r.length;s+=16)g=c,w=l,v=u,y=d,c=i(c,l,u,d,r[s],7,-680876936),d=i(d,c,l,u,r[s+1],12,-389564586),u=i(u,d,c,l,r[s+2],17,606105819),l=i(l,u,d,c,r[s+3],22,-1044525330),c=i(c,l,u,d,r[s+4],7,-176418897),d=i(d,c,l,u,r[s+5],12,1200080426),u=i(u,d,c,l,r[s+6],17,-1473231341),l=i(l,u,d,c,r[s+7],22,-45705983),c=i(c,l,u,d,r[s+8],7,1770035416),d=i(d,c,l,u,r[s+9],12,-1958414417),u=i(u,d,c,l,r[s+10],17,-42063),l=i(l,u,d,c,r[s+11],22,-1990404162),c=i(c,l,u,d,r[s+12],7,1804603682),d=i(d,c,l,u,r[s+13],12,-40341101),u=i(u,d,c,l,r[s+14],17,-1502002290),l=i(l,u,d,c,r[s+15],22,1236535329),c=a(c,l,u,d,r[s+1],5,-165796510),d=a(d,c,l,u,r[s+6],9,-1069501632),u=a(u,d,c,l,r[s+11],14,643717713),l=a(l,u,d,c,r[s],20,-373897302),c=a(c,l,u,d,r[s+5],5,-701558691),d=a(d,c,l,u,r[s+10],9,38016083),u=a(u,d,c,l,r[s+15],14,-660478335),l=a(l,u,d,c,r[s+4],20,-405537848),c=a(c,l,u,d,r[s+9],5,568446438),d=a(d,c,l,u,r[s+14],9,-1019803690),u=a(u,d,c,l,r[s+3],14,-187363961),l=a(l,u,d,c,r[s+8],20,1163531501),c=a(c,l,u,d,r[s+13],5,-1444681467),d=a(d,c,l,u,r[s+2],9,-51403784),u=a(u,d,c,l,r[s+7],14,1735328473),l=a(l,u,d,c,r[s+12],20,-1926607734),c=m(c,l,u,d,r[s+5],4,-378558),d=m(d,c,l,u,r[s+8],11,-2022574463),u=m(u,d,c,l,r[s+11],16,1839030562),l=m(l,u,d,c,r[s+14],23,-35309556),c=m(c,l,u,d,r[s+1],4,-1530992060),d=m(d,c,l,u,r[s+4],11,1272893353),u=m(u,d,c,l,r[s+7],16,-155497632),l=m(l,u,d,c,r[s+10],23,-1094730640),c=m(c,l,u,d,r[s+13],4,681279174),d=m(d,c,l,u,r[s],11,-358537222),u=m(u,d,c,l,r[s+3],16,-722521979),l=m(l,u,d,c,r[s+6],23,76029189),c=m(c,l,u,d,r[s+9],4,-640364487),d=m(d,c,l,u,r[s+12],11,-421815835),u=m(u,d,c,l,r[s+15],16,530742520),l=m(l,u,d,c,r[s+2],23,-995338651),c=h(c,l,u,d,r[s],6,-198630844),d=h(d,c,l,u,r[s+7],10,1126891415),u=h(u,d,c,l,r[s+14],15,-1416354905),l=h(l,u,d,c,r[s+5],21,-57434055),c=h(c,l,u,d,r[s+12],6,1700485571),d=h(d,c,l,u,r[s+3],10,-1894986606),u=h(u,d,c,l,r[s+10],15,-1051523),l=h(l,u,d,c,r[s+1],21,-2054922799),c=h(c,l,u,d,r[s+8],6,1873313359),d=h(d,c,l,u,r[s+15],10,-30611744),u=h(u,d,c,l,r[s+6],15,-1560198380),l=h(l,u,d,c,r[s+13],21,1309151649),c=h(c,l,u,d,r[s+4],6,-145523070),d=h(d,c,l,u,r[s+11],10,-1120210379),u=h(u,d,c,l,r[s+2],15,718787259),l=h(l,u,d,c,r[s+9],21,-343485551),c=e(c,g),l=e(l,w),u=e(u,v),d=e(d,y);return[c,l,u,d]}function E(r){var p,s="",g=r.length*32;for(p=0;p<g;p+=8)s+=String.fromCharCode(r[p>>5]>>>p%32&255);return s}function L(r){var p,s=[];for(s[(r.length>>2)-1]=void 0,p=0;p<s.length;p+=1)s[p]=0;var g=r.length*8;for(p=0;p<g;p+=8)s[p>>5]|=(r.charCodeAt(p/8)&255)<<p%32;return s}function I(r){return E(f(L(r),r.length*8))}function Ct(r,p){var s,g=L(r),w=[],v=[],y;for(w[15]=v[15]=void 0,g.length>16&&(g=f(g,r.length*8)),s=0;s<16;s+=1)w[s]=g[s]^909522486,v[s]=g[s]^1549556828;return y=f(w.concat(L(p)),512+p.length*8),E(f(v.concat(y),512+128))}function V(r){var p="0123456789abcdef",s="",g,w;for(w=0;w<r.length;w+=1)g=r.charCodeAt(w),s+=p.charAt(g>>>4&15)+p.charAt(g&15);return s}function F(r){return unescape(encodeURIComponent(r))}function K(r){return I(F(r))}function Lt(r){return V(K(r))}function Q(r,p){return Ct(F(r),F(p))}function It(r,p){return V(Q(r,p))}function U(r,p,s){return p?s?Q(p,r):It(p,r):s?K(r):Lt(r)}typeof define=="function"&&define.amd?define(function(){return U}):typeof O=="object"&&O.exports?O.exports=U:t.md5=U})(X)});if(document.body.classList){/windows/i.test(navigator.userAgent)&&document.body.classList.add("win");let t=document.getElementById("js-theme-toggle");window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.body.classList.add("dark-theme"),t&&(t.checked=!0)):document.body.classList.add("light-theme"),t&&t.addEventListener("change",function(e){t.checked?(document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme")):(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"))})}var tt=Dt(Z()),Ht="3TS0s5PHGBN6gHZyno4ChbaXtrjUDp";function T(t,e,n={}){let o=new XMLHttpRequest,i=n.method;if(i||(e?i="POST":i="GET"),o.open(i,t,!0),!n.anonymous){let a=Bt({method:i,url:Ft(t),scope:n.scope||"admin"});o.setRequestHeader("Authorization","session "+a)}return n.timeout&&(o.timeout=n.timeout),new Promise((a,m)=>{o.onreadystatechange=function(){if(o.readyState===4){if(o.status===200||o.status===201)a(JSON.parse(o.responseText));else if(o.status===400&&n.fail){let h=new Error("Bad Request");h.data=JSON.parse(o.responseText),m(h)}}},o.ontimeout=function(){n.ontimeout&&n.ontimeout(),o.abort(),m(new Error("Request Timeout"))},o.onerror=function(){m(new Error("Request Error"))},e?(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e))):o.send()})}function Bt(t){let e=parseInt(+new Date/1e3,10),n=z(JSON.stringify({iat:e,alg:"T5"}));t.site_id=window.SITE.id;let o=z(JSON.stringify(t)),i=z((0,tt.default)(`${n}.${o}.${Ht}`));return`${n}.${o}.${i}`}function z(t){return btoa(t).replace(/=*$/,"")}function Ft(t){return/^https?:\/\//.test(t)?new URL(t).pathname:t}var et="https://typlog.com",nt=document.querySelector('meta[name="provider"]');nt&&(et=nt.content);function q(t,e,n={}){let o=et+"/api/v3/browser/"+t;return T(o,e,n)}function Ut(t){return q("subscribe",t)}function Pt(t,e){return q("images",{id:t,images:e})}function zt(t,e){return q("reveal",{id:t,password:e})}function xt(t){return q("stats",t)}function Jt(t){return q("search",{q:t})}var _={subscribe:Ut,collectImages:Pt,reveal:zt,track:xt,search:Jt};function Gt(){let t={ul:navigator.language.toLowerCase(),dl:location.href,dt:document.title,cd1:SITE.id},e=document.querySelector('meta[name="page:id"]'),n=document.querySelector('meta[name="page:type"]');if(e&&n){let f=e.content;Yt(f);let E=n.content;E==="audio"?t.cd2="episode/"+f:t.cd2=E+"/"+f}let o=document.querySelector('link[rel="canonical"]');o&&(t.dl=o.href);let i=document.querySelector('meta[property="og:title"]');i&&(t.dt=i.content);let a=Math.round(visualViewport.width),m=Math.round(visualViewport.height);t.vp=`${a}x${m}`,t.sr=`${screen.width}x${screen.height}`,t.sd=`${screen.colorDepth}-bit`;let h=new URL(SITE.base_url);}function Yt(t){let e=document.querySelector(".js-enjoy"),n=document.createElement("i"),o=i=>{n&&i.likes&&(e.contains(n)||e.appendChild(n),n.textContent=i.likes)};if(_.track({view:t}).then(o),e){let i={};try{if(i=JSON.parse(localStorage.getItem("likes"))||{},i[t]){e.disabled=!0;return}}catch{}e.addEventListener("click",()=>{e.disabled=!0,_.track({like:t}).then(o),i[t]=1,localStorage.setItem("likes",JSON.stringify(i))})}}SITE.active&&Gt();function ot(t){let e=t.getAttribute("data-src");e||(e=t.getAttribute("data-cover"));let n="background-image:url("+e+")",o=t.getAttribute("data-width"),i=t.getAttribute("data-height");if(o&&i){let a=parseInt(i,10)*100/parseInt(o,10)+"vw";n+=";height:"+a}t.setAttribute("style",n)}var R=document.querySelectorAll(".js-cover");if("IntersectionObserver"in window){let t=new IntersectionObserver(function(e,n){e.forEach(function(o){o.isIntersecting&&(ot(o.target),t.unobserve(o.target))})});for(let e=0;e<R.length;e++)t.observe(R[e])}else for(let t=0;t<R.length;t++)ot(R[t]);var Wt=document.querySelector('meta[name="provider"]').content,rt=document.querySelector(".js-check");rt&&SITE.active&&rt.addEventListener("click",function(){let t=document.querySelector('meta[name="page:id"]');t&&(location.href=Wt+"/r/read/"+t.content)});var it=class{constructor(){this._inserted=!1,this.el=x("div","overlay");let e=x("div","overlay_wrap");this.el.appendChild(e),this.wrapper=e;let n=x("button","overlay_close");n.setAttribute("aria-label","Close"),n.innerHTML='<svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',this.el.appendChild(n),n.addEventListener("click",o=>{o.preventDefault(),this.hide()})}appendChild(e){this.wrapper.appendChild(e)}show(){this._inserted||(document.body.appendChild(this.el),this._inserted=!0),document.body.classList.add("overlay-active")}hide(){document.body.classList.remove("overlay-active")}};function x(t,e){var n=document.createElement(t);return n.className=e,n}var k=it;function b(t,e){var n,o=document.getElementsByTagName("head")[0];/\.css$/.test(t)?(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.href=t):(n=document.createElement("script"),n.src=t),e&&(n.onload=e),o.appendChild(n)}function Vt(){var t="test-db",e=window.localStorage;if(!e)return!1;try{return e.setItem(t,"a"),e.removeItem(t),!0}catch{return!1}}var Fe=Vt();var Kt="https://s3.typlog.com/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js",J=null;function M(t,{id:e,key:n}={}){return e&&n?J?st(t):new Promise((o,i)=>{b(Kt,()=>{J=window.algoliasearch(e,n).initIndex(window.SITE.slug),st(t).then(o).catch(i)})}):Qt(t)}function Qt(t){let e=new RegExp(t,"ig"),n=o=>o.replace(e,i=>"<em>"+i+"</em>");return _.search(t).then(o=>{let i=o.results.map(a=>(a.title=n(a.title),a.subtitle&&(a.subtitle=n(a.subtitle)),a.cover&&(a.image=a.cover.src),a));return{engine:"api",results:i}})}function st(t){return J.search(t,{attributesToHighlight:["title","subtitle"],attributesToSnippet:["content"],snippetEllipsisText:"...",queryLanguages:["zh","ja","en"]}).then(({hits:e})=>{if(!e.length)return{engine:"algolia",results:[]};let n=e.map(o=>{let i={title:o._highlightResult.title.value,url:o.url,image:o.image},a=o._highlightResult.subtitle;a&&(i.subtitle=a.value);let m=o._snippetResult.content;return m&&(i.content=m.value),i});return{engine:"algolia",results:n}})}var Xt="https://s3.typlog.com/npm/@typlog/ui@1.7.0/algolia.svg",Zt=`<div class="algolia_logo"><img src="${Xt}"></div>`,C=document.querySelector(".js-search"),G;C&&(C.nodeName==="INPUT"?C.addEventListener("focus",function(){at()}):C.addEventListener("click",function(t){t.preventDefault(),at()}));function at(){G||(G=new ct),G.show()}var ct=class{constructor(){this.overlay=new k;let e=lt("input","search_input");e.type="search",e.placeholder="Type to search ...",this.overlay.appendChild(e),this.input=e,e.addEventListener("keyup",o=>{o.keyCode===13?this.search():o.keyCode===27&&this.overlay.hide()});let n=lt("div","search_results");this.overlay.appendChild(n),this.container=n}show(){this.overlay.show(),this.input.focus()}search(){let e=this.input.value;if(!e)return;let n=C.getAttribute("data-id"),o=C.getAttribute("data-key");M(e,{id:n,key:o}).then(({engine:i,results:a})=>{let m=a.map(te).join("");i==="algolia"&&(m+=Zt),this.container.innerHTML=m}).catch(()=>{this.container.innerHTML="<h2>an error has occurred<h2>"})}};function lt(t,e){var n=document.createElement(t);return n.className=e,n}function te(t){let e=t.url,n=`<h3>${t.title}</h3>`;t.subtitle&&(n+=`<h4>${t.subtitle}</h4>`),t.content&&(n+=`<p>${t.content}</p>`);let o='<div class="search_hit">';return o+=`<a class="search_text" href="${e}">${n}</a>`,t.image&&(o+=`
    <a class="search_image" href="${e}">
      <img src="${t.image}" />
    </a>
    `),o+"</div>"}var ee=0;function N(t){var e=ne(t);e.id="notice-"+ee++,this.el=e}N.prototype.show=function(){if(!document.getElementById(this.el.id)){var t=document.querySelector(".notice-container");t||(t=document.createElement("div"),t.className="notice-container",document.body.appendChild(t)),t.appendChild(this.el)}};N.prototype.hide=N.prototype.clear=function(){ut(this.el)};function ne(t){var e=document.createElement("div");e.className="notice-item",t.type&&(e.className+=" "+t.type);var n;t.url?(n=document.createElement("a"),n.href=t.url,n.target="_blank"):n=document.createElement("div"),n.className="notice-content",n.innerHTML=t.message;var o=document.createElement("span");o.className="notice-close",o.innerHTML="\xD7",e.appendChild(o),e.appendChild(n);var i=t.closeEvent||"click";return o.addEventListener(i,function(a){ut(e)}),e}function ut(t){t.className+=" notice-dismiss",setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},200)}function dt(t,e){if(!!t){t.message||(t={message:t});var n=t.duration||4e3,o=new N(t);o.show(),setTimeout(function(){o.clear(),e&&e()},n)}}dt.Notice=N;var D=dt;var H;function oe(){H||(H=new k,H.appendChild(re())),H.show()}function re(){let t=document.createElement("div");t.className="typlog-subscribe";let e=document.createElement("div");e.className="typlog-subscribe_head";let n=document.querySelector(".js-cover");if(n&&n.getAttribute("data-src")){let f=n.getAttribute("data-src");f&&(e.style=`background-image:url(${f})`)}e.innerHTML=`<h2>${SITE.name}</h2>`,t.appendChild(e);let o=document.createElement("div");o.className="typlog-subscribe_main";let i=document.createElement("div"),a=document.querySelector('link[rel="alternate"]'),m=encodeURIComponent(a.href);i.className="typlog-subscribe_feed",i.innerHTML=`
  <a href="https://feedly.com/i/subscription/feed/${m}" class="feedly" target="_blank"><span>Subscribe via </span>Feedly</a>
  <a href="https://www.inoreader.com/feed/${m}" class="inoreader" target="_blank"><span>Subscribe via </span>Inoreader</a>
  <a href="https://feedbin.com/?subscribe=${m}" class="feedbin" target="_blank"><span>Subscribe via </span>Feedbin</a>
  `;let h=document.createElement("div");if(SITE.socials&&(h.className="typlog-subscribe_social",h.innerhtml=se(SITE.socials).map(f=>`<a href="${f.href}" target="_blank"><i class="icon icon-${f.icon}" aria-label="${f.name}"></i></a>`).join("")),SITE.enable_subscriber){let f=ae();o.appendChild(f)}return o.appendChild(i),o.appendChild(h),t.appendChild(o),t}var ie=[["telegram","https://t.me/","Telegram"],["github","https://github.com/","GitHub"],["twitter","https://twitter.com/","Twitter"],["instagram","https://instagram.com/","Instagram"],["weibo","https://www.weibo.com/","\u5FAE\u535A"],["behance","https://www.behance.net/","Behance"],["linkedin","https://www.linkedin.com/in/","Linkedin"],["vsco","https://vsco.co/","VSCO"],["unsplash","https://unsplash.com/@","Unsplash"],["zhihu","https://www.zhihu.com/people/","\u77E5\u4E4E"]];function se(t){let e=[];return ie.forEach(n=>{let o=n[0];t[o]&&e.push({href:n[1]+t[o],name:n[2],icon:o})}),e}function ae(){let t=document.createElement("form");return t.className="typlog-subscribe_mail",t.innerHTML=`
  <div><input name="name" placeholder="Enter Your Name" required/></div>
  <div><input type="email" name="email" placeholder="Enter Your Email Address" required/></div>
  <button>Subscribe via Email</button>
  <p>You can also subscribe via</p>
  `,mt(t),t}function mt(t){t.addEventListener("submit",function(e){e.preventDefault();let n=t.querySelectorAll("input"),o={};for(let i=0;i<n.length;i++)o[n[i].name]=n[i].value;_.subscribe(o).then(function(){D("You have subscribed the mailling list successfully.")})})}function ce(t){t.tagName==="FORM"?mt(t):t.addEventListener("click",()=>oe())}if(SITE.active){let t=document.querySelectorAll(".js-subscribe");for(let e=0;e<t.length;e++)ce(t[e])}var le=document.querySelector('meta[name="provider"]').content,pt=class{constructor({el:e,src:n,objectId:o,siteId:i}){let a=document.createElement("iframe");a.setAttribute("frameborder","0"),a.setAttribute("scrolling","no"),a.setAttribute("width","100%"),a.setAttribute("height","200");let m=new MessageChannel;m.port1.onmessage=h=>{let{event:f}=h.data;if(f==="resize"){let{height:E}=h.data;a.setAttribute("height",E)}else this.receiveMessage(h.data)},a.addEventListener("load",()=>{a.contentWindow.postMessage({objectId:o,siteId:i,event:"config",href:location.href},"*",[m.port2])}),a.src=n,e.appendChild(a),this.postMessage=(h,f)=>{m.port1.postMessage({event:h,...f})},window.addEventListener("resize",()=>{m.port1.postMessage({event:"resize"})})}receiveMessage(e){console.log("... data",e)}},ht=document.querySelector("#comment_thread"),ft=document.querySelector('meta[name="page:id"]');SITE.active&&ht&&ft&&new pt({el:ht,siteId:SITE.id,objectId:ft.content,src:le+"/embed/comments"});function gt(t){t.querySelectorAll("em").forEach(de),t.querySelectorAll("rt").forEach(me),t.querySelectorAll(".iframe_wrapper").forEach(pe),t.querySelectorAll("code").forEach(Y("en")),t.querySelectorAll(".block-code").forEach(Y("en")),t.querySelectorAll(".gist").forEach(Y("en"))}function Y(t){return function(e){e.setAttribute("lang",t)}}function ue(t){if(!t.match(/[\u2E80-\u9FFF]/)){{if(t.match(/[\u3040-\u31FF]/))return"ja";if(t.match(/[\u3130-\u318F]/))return"kr"}return"en"}}function de(t){let e=t.textContent||t.innerText,n=ue(e);n&&t.setAttribute("lang",n)}function me(t){(t.textContent||t.innerText).match(/([\u02C7-\u02CB\u02D9\u02EA-\u02EB\u3105-\u312D\u31A0-\u31BB])/)&&t.classList.add("bopomofo")}function pe(t){let e=t.getAttribute("data-ratio");t.setAttribute("style","padding-bottom:"+e+"%")}var he="https://platform.twitter.com/widgets.js";function wt(t){(t.querySelector("blockquote.twitter-tweet")||t.querySelector("a.twitter-moment"))&&!window.twttr&&b(he)}var fe='<div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"> </button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"> </button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div>',S;function W(t){if(S)return t(S);S=document.createElement("div"),S.className="pswp",S.setAttribute("role","dialog"),S.setAttribute("aria-hidden","true"),S.setAttribute("tabindex","-1"),S.innerHTML=fe,document.body.appendChild(S);function e(){window.PhotoSwipe&&window.PhotoSwipeUI_Default&&t(S)}b("https://s3.typlog.com/npm/photoswipe@4.1.3/dist/photoswipe.css"),b("https://s3.typlog.com/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"),b("https://s3.typlog.com/npm/photoswipe@4.1.3/dist/photoswipe.min.js",e),b("https://s3.typlog.com/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js",e)}function ge(t,e){if(!e.length)return!0;let n=e.map(a=>a.src),o,i;for(let a=0;a<t.length;a++){if(o=t[a].getAttribute("data-src"),i=n.indexOf(o),i===-1)return!0;n.splice(i,1)}return n.length>0}function we(t,e){let n=[];function o(a){let m=a.target,h=m.naturalWidth,f=m.naturalHeight;m.setAttribute("data-width",h),m.setAttribute("data-height",f),n.push({src:m.src,width:h,height:f}),n.length>=t.length&&e(n)}function i(a){let m=a.target;n.push({src:m.src,width:0,height:0}),n.length>=t.length&&e(n)}for(let a=0;a<t.length;a++)t[a].onload=o,t[a].onerror=i,t[a].src=t[a].getAttribute("data-src")}function ve(t,e){let n={};e.forEach(m=>{n[m.src]=m});let o,i,a;for(let m=0;m<t.length;m++)i=t[m],o=i.getAttribute("data-src"),a=n[o],i.setAttribute("data-width",a.width),i.setAttribute("data-height",a.height),be(i,a)}function be(t,e){let n=e.height/e.width*100,o=document.createElement("div");o.className="img-placeholder",o.setAttribute("style",`padding-bottom:${n}%`);let i=t.parentNode;i.insertBefore(o,t),t.src=Se(t.getAttribute("data-src")),t.onload=()=>{i.removeChild(o)}}function ye(t){let e=t.querySelectorAll("img");if(e.length<2)return;let n=.01,o={},i,a,m,h;for(let f=0;f<e.length;f++)i=e[f],a=i.getAttribute("data-width"),m=i.getAttribute("data-height"),a&&m&&(h=parseInt(a,10)/parseInt(m,10),h>n&&(n=h),o[f]=h);for(let f=0;f<e.length;f++)i=e[f],h=o[f],h&&i.parentNode.setAttribute("style","flex:"+h/n)}function vt(t){let e=t.querySelectorAll(".gallery_column");for(let n=0;n<e.length;n++)ye(e[n])}function _e(t){let e=document.querySelector('meta[name="page:id"]');if(e){let n=e.getAttribute("content");_.collectImages(n,t)}}function bt(t,e){let n=t.querySelectorAll("img[data-src]");!n.length||(ge(n,e||[])?we(n,o=>{vt(t),yt(n),e&&_e(o)}):(ve(n,e),vt(t),yt(n)))}function yt(t){function e(n){let o=n.getAttribute("data-width"),i=n.getAttribute("data-height");if(o&&i)return{w:parseInt(o,10),h:parseInt(i,10),src:n.getAttribute("data-src"),title:n.getAttribute("alt")}}W(function(n){let o=[],i=function(m){let h={index:m,getThumbBoundsFn:function(E){var L=window.pageYOffset||document.documentElement.scrollTop,I=t[E].getBoundingClientRect();return{x:I.left,y:I.top+L,w:I.width}}};new PhotoSwipe(n,PhotoSwipeUI_Default,o,h).init()},a=function(m,h){m.onclick=function(){i(h)}};for(let m=0;m<t.length;m++){let h=e(t[m]);h&&(o.push(h),a(t[m],m))}})}function Se(t){let e=/chrome/i.test(navigator.userAgent);return/https:\/\/images\.unsplash\.com/.test(t)?(t=t.replace(/&w=\d+/,""),t=t+"&w=1920",e?t.replace("fm=jpg","fm=webp"):t):/\.(jpe?g|png)$/.test(t)&&/https:\/\/i\.typlog\.com/.test(t)?e?t+"?x-oss-process=image/auto-orient,1/interlace,1/resize,m_lfit,w_1920/quality,q_90/format,webp":t+"?x-oss-process=style/l":t}var j=null;function _t(t){let e=t.querySelectorAll(".block-embed.audio .block-embed_content"),n=t.querySelector(".js-audio");(e.length>0||n)&&Et(e,n)}function B(t,e="og"){let n=`meta[property="${e}:${t}"]`,o=document.querySelector(n);return o?o.getAttribute("content"):""}function Ee(t){let e=getComputedStyle(t).getPropertyValue("--primary-color-mode"),n=t.querySelector("audio");j=new window.Shikwasa({container:t,preload:"none",download:!0,fixed:{type:"static"},theme:e==="dark"?"light":"dark",themeColor:"var(--primary-color-hex)",audio:{src:n.src,artist:B("site_name"),title:n.getAttribute("data-title")||B("title"),cover:n.getAttribute("data-image")||B("image"),duration:n.getAttribute("data-duration")||B("duration","music")}}),window.location.hash&&St(),window.onhashchange=function(){j&&(St(),j.audio.paused&&j.play())}}function Ae(t){let e=JSON.parse(decodeURIComponent(t.getAttribute("data-item")));e.url&&!e.src&&(e.src=e.url),e.title=e.title||e.name||"",new window.Shikwasa({container:t,audio:e,preload:"metadata",fixed:{type:"static"},themeColor:"rgb(var(--primary-color-rgb))"})}function St(){let t=window.location.hash.match(/#t=(\d?\d)?:?(\d\d):(\d\d)/);if(!t)return;let e=parseInt((t[1]||0)*3600)+parseInt(t[2]*60)+parseInt(t[3]);j.seek(e)}function Et(t,e){if(window.Shikwasa){if(t)for(let n=0;n<t.length;n++)Ae(t[n]);e&&Ee(e)}else{let n="https://s3.typlog.com/npm/shikwasa@2.0.1/dist/shikwasa.min.js";b("https://s3.typlog.com/npm/shikwasa@2.0.1/dist/shikwasa.min.css"),b(n,function(){Et(t,e)})}}var ke="https://s3.typlog.com/npm/qrious@4.0.2/dist/qrious.min.js",Ce={tw:"https://twitter.com/intent/tweet?text={t}&url={u}",fb:"http://www.facebook.com/sharer.php?u={u}",wb:"http://service.weibo.com/share/share.php?title={t}&url={u}",tg:"https://telegram.me/share/url?url={u}&text={t}"},$;function Le(t){$&&$.show(),$=new k,b(ke,()=>{let e=new Image;new window.QRious({element:e,size:600,value:t}),e.setAttribute("style","width:300px;height:300px;");let n=document.createElement("div");n.setAttribute("style","text-align:center"),n.innerHTML="<h3>\u626B\u63CF\u4E8C\u7EF4\u7801\u5206\u4EAB\u5230\u5FAE\u4FE1</h3>",n.appendChild(e),$.appendChild(n)}),$.show()}function At(){let t=document.querySelector('meta[property="og:title"]').getAttribute("content"),e=document.querySelector('link[rel="canonical"]').getAttribute("href");function n(i){i.addEventListener("click",function(a){a.preventDefault();let m=i.getAttribute("data-type");if(m==="wx")return Le(e);let h=Ce[m],f=i.getAttribute("data-href")||e;h=h.replace("{t}",encodeURIComponent(t)).replace("{u}",encodeURIComponent(f)),window.open(h,"_blank","width=615,height=505")})}let o=document.querySelectorAll("a.js-share");for(let i=0;i<o.length;i++)n(o[i])}var A=document.querySelector(".js-content");A&&(gt(A),wt(A),_t(A),At(),A.querySelector(".math")&&(window.MathJax={tex:{inlineMath:[["$","$"]]},svg:{fontCache:"global"}},b("https://s3.typlog.com/npm/mathjax@3/es5/tex-mml-chtml.js")));function Ie(){let t=document.querySelector("#f_form");t&&t.addEventListener("submit",e=>{e.preventDefault();let n=document.querySelector('meta[name="page:id"]').content,o=document.querySelector("#f_password").value;_.reveal(n,o).then(i=>{location.href=i.url}).catch(i=>{if(i.data&&i.data.message){let a=i.data;a.type="error",D(a)}})})}function kt(t){A&&(bt(A,t),Ie())}window.typlog={content:kt,search:M};})();